{"ast":null,"code":"import { CID } from 'multiformats/cid';\nimport { decodeNode } from './pb-decode.js';\nimport { encodeNode } from './pb-encode.js';\nimport { prepare, validate, createNode, createLink } from './util.js';\nexport const name = 'dag-pb';\nexport const code = 112;\nexport function encode(node) {\n  validate(node);\n  const pbn = {};\n\n  if (node.Links) {\n    pbn.Links = node.Links.map(l => {\n      const link = {};\n\n      if (l.Hash) {\n        link.Hash = l.Hash.bytes;\n      }\n\n      if (l.Name !== undefined) {\n        link.Name = l.Name;\n      }\n\n      if (l.Tsize !== undefined) {\n        link.Tsize = l.Tsize;\n      }\n\n      return link;\n    });\n  }\n\n  if (node.Data) {\n    pbn.Data = node.Data;\n  }\n\n  return encodeNode(pbn);\n}\nexport function decode(bytes) {\n  const pbn = decodeNode(bytes);\n  const node = {};\n\n  if (pbn.Data) {\n    node.Data = pbn.Data;\n  }\n\n  if (pbn.Links) {\n    node.Links = pbn.Links.map(l => {\n      const link = {};\n\n      try {\n        link.Hash = CID.decode(l.Hash);\n      } catch (e) {}\n\n      if (!link.Hash) {\n        throw new Error('Invalid Hash field found in link, expected CID');\n      }\n\n      if (l.Name !== undefined) {\n        link.Name = l.Name;\n      }\n\n      if (l.Tsize !== undefined) {\n        link.Tsize = l.Tsize;\n      }\n\n      return link;\n    });\n  }\n\n  return node;\n}\nexport { prepare, validate, createNode, createLink };","map":{"version":3,"names":["CID","decodeNode","encodeNode","prepare","validate","createNode","createLink","name","code","encode","node","pbn","Links","map","l","link","Hash","bytes","Name","undefined","Tsize","Data","decode","e","Error"],"sources":["/home/salex/Blockchain/Bootcamp-repositorio/32-DApp con React - Marketplace de NFTs/node_modules/@ipld/dag-pb/esm/src/index.js"],"sourcesContent":["import { CID } from 'multiformats/cid';\nimport { decodeNode } from './pb-decode.js';\nimport { encodeNode } from './pb-encode.js';\nimport {\n  prepare,\n  validate,\n  createNode,\n  createLink\n} from './util.js';\nexport const name = 'dag-pb';\nexport const code = 112;\nexport function encode(node) {\n  validate(node);\n  const pbn = {};\n  if (node.Links) {\n    pbn.Links = node.Links.map(l => {\n      const link = {};\n      if (l.Hash) {\n        link.Hash = l.Hash.bytes;\n      }\n      if (l.Name !== undefined) {\n        link.Name = l.Name;\n      }\n      if (l.Tsize !== undefined) {\n        link.Tsize = l.Tsize;\n      }\n      return link;\n    });\n  }\n  if (node.Data) {\n    pbn.Data = node.Data;\n  }\n  return encodeNode(pbn);\n}\nexport function decode(bytes) {\n  const pbn = decodeNode(bytes);\n  const node = {};\n  if (pbn.Data) {\n    node.Data = pbn.Data;\n  }\n  if (pbn.Links) {\n    node.Links = pbn.Links.map(l => {\n      const link = {};\n      try {\n        link.Hash = CID.decode(l.Hash);\n      } catch (e) {\n      }\n      if (!link.Hash) {\n        throw new Error('Invalid Hash field found in link, expected CID');\n      }\n      if (l.Name !== undefined) {\n        link.Name = l.Name;\n      }\n      if (l.Tsize !== undefined) {\n        link.Tsize = l.Tsize;\n      }\n      return link;\n    });\n  }\n  return node;\n}\nexport {\n  prepare,\n  validate,\n  createNode,\n  createLink\n};"],"mappings":"AAAA,SAASA,GAAT,QAAoB,kBAApB;AACA,SAASC,UAAT,QAA2B,gBAA3B;AACA,SAASC,UAAT,QAA2B,gBAA3B;AACA,SACEC,OADF,EAEEC,QAFF,EAGEC,UAHF,EAIEC,UAJF,QAKO,WALP;AAMA,OAAO,MAAMC,IAAI,GAAG,QAAb;AACP,OAAO,MAAMC,IAAI,GAAG,GAAb;AACP,OAAO,SAASC,MAAT,CAAgBC,IAAhB,EAAsB;EAC3BN,QAAQ,CAACM,IAAD,CAAR;EACA,MAAMC,GAAG,GAAG,EAAZ;;EACA,IAAID,IAAI,CAACE,KAAT,EAAgB;IACdD,GAAG,CAACC,KAAJ,GAAYF,IAAI,CAACE,KAAL,CAAWC,GAAX,CAAeC,CAAC,IAAI;MAC9B,MAAMC,IAAI,GAAG,EAAb;;MACA,IAAID,CAAC,CAACE,IAAN,EAAY;QACVD,IAAI,CAACC,IAAL,GAAYF,CAAC,CAACE,IAAF,CAAOC,KAAnB;MACD;;MACD,IAAIH,CAAC,CAACI,IAAF,KAAWC,SAAf,EAA0B;QACxBJ,IAAI,CAACG,IAAL,GAAYJ,CAAC,CAACI,IAAd;MACD;;MACD,IAAIJ,CAAC,CAACM,KAAF,KAAYD,SAAhB,EAA2B;QACzBJ,IAAI,CAACK,KAAL,GAAaN,CAAC,CAACM,KAAf;MACD;;MACD,OAAOL,IAAP;IACD,CAZW,CAAZ;EAaD;;EACD,IAAIL,IAAI,CAACW,IAAT,EAAe;IACbV,GAAG,CAACU,IAAJ,GAAWX,IAAI,CAACW,IAAhB;EACD;;EACD,OAAOnB,UAAU,CAACS,GAAD,CAAjB;AACD;AACD,OAAO,SAASW,MAAT,CAAgBL,KAAhB,EAAuB;EAC5B,MAAMN,GAAG,GAAGV,UAAU,CAACgB,KAAD,CAAtB;EACA,MAAMP,IAAI,GAAG,EAAb;;EACA,IAAIC,GAAG,CAACU,IAAR,EAAc;IACZX,IAAI,CAACW,IAAL,GAAYV,GAAG,CAACU,IAAhB;EACD;;EACD,IAAIV,GAAG,CAACC,KAAR,EAAe;IACbF,IAAI,CAACE,KAAL,GAAaD,GAAG,CAACC,KAAJ,CAAUC,GAAV,CAAcC,CAAC,IAAI;MAC9B,MAAMC,IAAI,GAAG,EAAb;;MACA,IAAI;QACFA,IAAI,CAACC,IAAL,GAAYhB,GAAG,CAACsB,MAAJ,CAAWR,CAAC,CAACE,IAAb,CAAZ;MACD,CAFD,CAEE,OAAOO,CAAP,EAAU,CACX;;MACD,IAAI,CAACR,IAAI,CAACC,IAAV,EAAgB;QACd,MAAM,IAAIQ,KAAJ,CAAU,gDAAV,CAAN;MACD;;MACD,IAAIV,CAAC,CAACI,IAAF,KAAWC,SAAf,EAA0B;QACxBJ,IAAI,CAACG,IAAL,GAAYJ,CAAC,CAACI,IAAd;MACD;;MACD,IAAIJ,CAAC,CAACM,KAAF,KAAYD,SAAhB,EAA2B;QACzBJ,IAAI,CAACK,KAAL,GAAaN,CAAC,CAACM,KAAf;MACD;;MACD,OAAOL,IAAP;IACD,CAhBY,CAAb;EAiBD;;EACD,OAAOL,IAAP;AACD;AACD,SACEP,OADF,EAEEC,QAFF,EAGEC,UAHF,EAIEC,UAJF"},"metadata":{},"sourceType":"module"}