{"ast":null,"code":"var _jsxFileName = \"/home/salex/Blockchain/Bootcamp-repositorio/32-DApp con React - Marketplace de NFTs/src/frontend/components/MyPurchases.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { ethers } from 'ethers';\nimport { Row, Col, Card } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MyPurchases(_ref) {\n  _s();\n\n  let {\n    marketplace,\n    nft,\n    account\n  } = _ref;\n  const [loading, setLoading] = useState(true);\n  const [purchases, setPurchases] = useState([]);\n\n  const loadPurchasedItems = async () => {\n    const filter = marketplace.filters.Bought(null, null, null, null, null, account);\n    const results = await marketplace.queryFilter(filter);\n    const purchases = await Promise.all(results.map(async i => {\n      i = i.args;\n      const uri = await nft.tokenURI(i.tokenId);\n      const response = await fetch(uri);\n      const metadata = await response.json();\n      const totalPrice = await marketplace.getTotalPrice(i.itemId);\n      let purchasedItem = {\n        totalPrice,\n        price: i.price,\n        itemId: i.itemId,\n        name: metadata.name,\n        description: metadata.description,\n        image: metadata.image\n      };\n      return purchasedItem;\n    }));\n    setLoading(false);\n    setPurchases(purchases);\n  };\n\n  useEffect(() => {\n    loadPurchasedItems();\n  }, []);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"main\", {\n    style: {\n      padding: \"1rem 0\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 9\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex justify-center\",\n    children: purchases.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-5 py-3 container\",\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        xs: 1,\n        md: 2,\n        lg: 4,\n        className: \"g-4 py-3\",\n        children: purchases.map((item, idx) => /*#__PURE__*/_jsxDEV(Col, {\n          className: \"overflow-hidden\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: [/*#__PURE__*/_jsxDEV(Card.Img, {\n              variant: \"top\",\n              src: item.image\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 46,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(Card.Footer, {\n              children: [ethers.utils.formatEther(item.totalPrice), \" ETH\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 47,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 33\n          }, this)\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"main\", {\n      style: {\n        padding: \"1rem 0\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \" No purchases \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 21\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 9\n  }, this);\n}\n\n_s(MyPurchases, \"+bT9nvXJXwVwMkewhHc+Eyc0m60=\");\n\n_c = MyPurchases;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyPurchases\");","map":{"version":3,"names":["useState","useEffect","ethers","Row","Col","Card","MyPurchases","marketplace","nft","account","loading","setLoading","purchases","setPurchases","loadPurchasedItems","filter","filters","Bought","results","queryFilter","Promise","all","map","i","args","uri","tokenURI","tokenId","response","fetch","metadata","json","totalPrice","getTotalPrice","itemId","purchasedItem","price","name","description","image","padding","length","item","idx","utils","formatEther"],"sources":["/home/salex/Blockchain/Bootcamp-repositorio/32-DApp con React - Marketplace de NFTs/src/frontend/components/MyPurchases.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { ethers } from 'ethers';\nimport { Row, Col, Card } from 'react-bootstrap';\n\nexport default function MyPurchases({ marketplace, nft, account }) {\n    const [loading, setLoading] = useState(true);\n    const [purchases, setPurchases] = useState([]);\n    const loadPurchasedItems = async () => {\n        const filter = marketplace.filters.Bought(null, null, null, null, null, account);\n        const results = await marketplace.queryFilter(filter);\n        const purchases = await Promise.all(results.map(async i => {\n            i = i.args;\n            const uri = await nft.tokenURI(i.tokenId);\n            const response = await fetch(uri);\n            const metadata = await response.json();\n            const totalPrice = await marketplace.getTotalPrice(i.itemId);\n            let purchasedItem = {\n                totalPrice,\n                price: i.price,\n                itemId: i.itemId,\n                name: metadata.name,\n                description: metadata.description,\n                image: metadata.image\n            };\n            return purchasedItem;\n        }))\n        setLoading(false);\n        setPurchases(purchases);\n    }\n    useEffect(() => {\n        loadPurchasedItems()\n    }, [])\n    if (loading) return (\n        <main style={{ padding: \"1rem 0\" }}>\n            <h2>Loading...</h2>\n        </main>\n    );\n    return (\n        <div className='flex justify-center'>\n            {purchases.length > 0 ?\n                <div className='px-5 py-3 container'>\n                    <Row xs={1} md={2} lg={4} className=\"g-4 py-3\">\n                        {purchases.map((item, idx) => (\n                            <Col key={idx} className=\"overflow-hidden\">\n                                <Card>\n                                    <Card.Img variant=\"top\" src={item.image} />\n                                    <Card.Footer>\n                                        {ethers.utils.formatEther(item.totalPrice)} ETH\n                                    </Card.Footer>\n                                </Card>\n                            </Col>\n                        ))}\n                    </Row>\n                </div>\n                : (\n                    <main style={{ padding: \"1rem 0\" }}>\n                        <h2> No purchases </h2>\n                    </main>\n                )}\n        </div>\n    );\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}