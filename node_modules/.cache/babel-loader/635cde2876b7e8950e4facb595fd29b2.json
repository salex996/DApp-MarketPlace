{"ast":null,"code":"import { alloc, concat, slice } from './byte-utils.js';\nconst defaultChunkSize = 256;\nexport class Bl {\n  constructor() {\n    let chunkSize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultChunkSize;\n    this.chunkSize = chunkSize;\n    this.cursor = 0;\n    this.maxCursor = -1;\n    this.chunks = [];\n    this._initReuseChunk = null;\n  }\n\n  reset() {\n    this.cursor = 0;\n    this.maxCursor = -1;\n\n    if (this.chunks.length) {\n      this.chunks = [];\n    }\n\n    if (this._initReuseChunk !== null) {\n      this.chunks.push(this._initReuseChunk);\n      this.maxCursor = this._initReuseChunk.length - 1;\n    }\n  }\n\n  push(bytes) {\n    let topChunk = this.chunks[this.chunks.length - 1];\n    const newMax = this.cursor + bytes.length;\n\n    if (newMax <= this.maxCursor + 1) {\n      const chunkPos = topChunk.length - (this.maxCursor - this.cursor) - 1;\n      topChunk.set(bytes, chunkPos);\n    } else {\n      if (topChunk) {\n        const chunkPos = topChunk.length - (this.maxCursor - this.cursor) - 1;\n\n        if (chunkPos < topChunk.length) {\n          this.chunks[this.chunks.length - 1] = topChunk.subarray(0, chunkPos);\n          this.maxCursor = this.cursor - 1;\n        }\n      }\n\n      if (bytes.length < 64 && bytes.length < this.chunkSize) {\n        topChunk = alloc(this.chunkSize);\n        this.chunks.push(topChunk);\n        this.maxCursor += topChunk.length;\n\n        if (this._initReuseChunk === null) {\n          this._initReuseChunk = topChunk;\n        }\n\n        topChunk.set(bytes, 0);\n      } else {\n        this.chunks.push(bytes);\n        this.maxCursor += bytes.length;\n      }\n    }\n\n    this.cursor += bytes.length;\n  }\n\n  toBytes() {\n    let reset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    let byts;\n\n    if (this.chunks.length === 1) {\n      const chunk = this.chunks[0];\n\n      if (reset && this.cursor > chunk.length / 2) {\n        byts = this.cursor === chunk.length ? chunk : chunk.subarray(0, this.cursor);\n        this._initReuseChunk = null;\n        this.chunks = [];\n      } else {\n        byts = slice(chunk, 0, this.cursor);\n      }\n    } else {\n      byts = concat(this.chunks, this.cursor);\n    }\n\n    if (reset) {\n      this.reset();\n    }\n\n    return byts;\n  }\n\n}","map":{"version":3,"names":["alloc","concat","slice","defaultChunkSize","Bl","constructor","chunkSize","cursor","maxCursor","chunks","_initReuseChunk","reset","length","push","bytes","topChunk","newMax","chunkPos","set","subarray","toBytes","byts","chunk"],"sources":["/home/salex/Blockchain/Bootcamp-repositorio/32-DApp con React - Marketplace de NFTs/node_modules/cborg/esm/lib/bl.js"],"sourcesContent":["import {\n  alloc,\n  concat,\n  slice\n} from './byte-utils.js';\nconst defaultChunkSize = 256;\nexport class Bl {\n  constructor(chunkSize = defaultChunkSize) {\n    this.chunkSize = chunkSize;\n    this.cursor = 0;\n    this.maxCursor = -1;\n    this.chunks = [];\n    this._initReuseChunk = null;\n  }\n  reset() {\n    this.cursor = 0;\n    this.maxCursor = -1;\n    if (this.chunks.length) {\n      this.chunks = [];\n    }\n    if (this._initReuseChunk !== null) {\n      this.chunks.push(this._initReuseChunk);\n      this.maxCursor = this._initReuseChunk.length - 1;\n    }\n  }\n  push(bytes) {\n    let topChunk = this.chunks[this.chunks.length - 1];\n    const newMax = this.cursor + bytes.length;\n    if (newMax <= this.maxCursor + 1) {\n      const chunkPos = topChunk.length - (this.maxCursor - this.cursor) - 1;\n      topChunk.set(bytes, chunkPos);\n    } else {\n      if (topChunk) {\n        const chunkPos = topChunk.length - (this.maxCursor - this.cursor) - 1;\n        if (chunkPos < topChunk.length) {\n          this.chunks[this.chunks.length - 1] = topChunk.subarray(0, chunkPos);\n          this.maxCursor = this.cursor - 1;\n        }\n      }\n      if (bytes.length < 64 && bytes.length < this.chunkSize) {\n        topChunk = alloc(this.chunkSize);\n        this.chunks.push(topChunk);\n        this.maxCursor += topChunk.length;\n        if (this._initReuseChunk === null) {\n          this._initReuseChunk = topChunk;\n        }\n        topChunk.set(bytes, 0);\n      } else {\n        this.chunks.push(bytes);\n        this.maxCursor += bytes.length;\n      }\n    }\n    this.cursor += bytes.length;\n  }\n  toBytes(reset = false) {\n    let byts;\n    if (this.chunks.length === 1) {\n      const chunk = this.chunks[0];\n      if (reset && this.cursor > chunk.length / 2) {\n        byts = this.cursor === chunk.length ? chunk : chunk.subarray(0, this.cursor);\n        this._initReuseChunk = null;\n        this.chunks = [];\n      } else {\n        byts = slice(chunk, 0, this.cursor);\n      }\n    } else {\n      byts = concat(this.chunks, this.cursor);\n    }\n    if (reset) {\n      this.reset();\n    }\n    return byts;\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}